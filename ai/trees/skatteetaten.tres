[gd_resource type="BehaviorTree" load_steps=29 format=3 uid="uid://h2eknpt88ryi"]

[ext_resource type="Script" path="res://ai/tasks/choose_random_position.gd" id="1_lkcet"]
[ext_resource type="Script" path="res://ai/tasks/move_to_position.gd" id="2_dm7d8"]
[ext_resource type="Script" path="res://ai/tasks/find_target.gd" id="3_224rc"]
[ext_resource type="Script" path="res://ai/tasks/move_to_target.gd" id="4_s0mys"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_e45c2"]

[sub_resource type="BTConsolePrint" id="BTConsolePrint_ohtwt"]
text = "random move"

[sub_resource type="BTAction" id="BTAction_mqnl5"]
script = ExtResource("1_lkcet")
range_min_dir = 40.0
range_max_dir = 100.0
position_var = &"pos"
dir_var_x = &"dir_x"
dir_var_y = &"dir_y"

[sub_resource type="BTAction" id="BTAction_1ntt1"]
script = ExtResource("2_dm7d8")
target_position_var = &"pos"
dir_var_x = &"dir_x"
dir_var_y = &"dir_y"
speed_var = 10
tolerance = 5

[sub_resource type="BTWait" id="BTWait_jy1s6"]

[sub_resource type="BTRandomWait" id="BTRandomWait_kurno"]

[sub_resource type="BTSequence" id="BTSequence_8qmrr"]
custom_name = "Idle Sequence"
children = [SubResource("BTRandomWait_kurno")]

[sub_resource type="BTSequence" id="BTSequence_m3dsr"]
custom_name = "Random move squence"
children = [SubResource("BTConsolePrint_ohtwt"), SubResource("BTAction_mqnl5"), SubResource("BTAction_1ntt1"), SubResource("BTWait_jy1s6"), SubResource("BTSequence_8qmrr")]

[sub_resource type="BTProbability" id="BTProbability_xox0t"]
children = [SubResource("BTSequence_m3dsr")]

[sub_resource type="BTConsolePrint" id="BTConsolePrint_rwaxx"]
text = "Targeting friend"

[sub_resource type="BTAction" id="BTAction_0oqlc"]
script = ExtResource("3_224rc")
group = &"enemy"
target_variable = &"target"

[sub_resource type="BTAction" id="BTAction_tim6x"]
script = ExtResource("4_s0mys")
target_variable = &"target"
speed_var = 25
tolerance = 20

[sub_resource type="BTWait" id="BTWait_45gg8"]

[sub_resource type="BTSequence" id="BTSequence_vdf88"]
custom_name = "Target_Squence"
children = [SubResource("BTConsolePrint_rwaxx"), SubResource("BTAction_0oqlc"), SubResource("BTAction_tim6x"), SubResource("BTWait_45gg8")]

[sub_resource type="BTProbability" id="BTProbability_k2qhd"]
children = [SubResource("BTSequence_vdf88")]

[sub_resource type="BTConsolePrint" id="BTConsolePrint_1637o"]
text = "Targeting player(chase)"

[sub_resource type="BTAction" id="BTAction_4yc2d"]
script = ExtResource("3_224rc")
group = &"player"
target_variable = &"target"

[sub_resource type="BBNode" id="BBNode_vlxtv"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_mmk6o"]
animation_player = SubResource("BBNode_vlxtv")
animation_name = &"Warning"

[sub_resource type="BTAction" id="BTAction_cindu"]
script = ExtResource("4_s0mys")
target_variable = &"target"
speed_var = 60
tolerance = 20

[sub_resource type="BTWait" id="BTWait_8ftpy"]
duration = 5.0

[sub_resource type="BTSequence" id="BTSequence_r2513"]
custom_name = "Attack_Squence"
children = [SubResource("BTConsolePrint_1637o"), SubResource("BTAction_4yc2d"), SubResource("BTPlayAnimation_mmk6o"), SubResource("BTAction_cindu"), SubResource("BTWait_8ftpy")]

[sub_resource type="BTProbability" id="BTProbability_k1cfm"]
run_chance = 1.0
children = [SubResource("BTSequence_r2513")]

[sub_resource type="BTSelector" id="BTSelector_i5wuy"]
custom_name = "Selector"
children = [SubResource("BTProbability_xox0t"), SubResource("BTProbability_k2qhd"), SubResource("BTProbability_k1cfm")]

[resource]
blackboard_plan = SubResource("BlackboardPlan_e45c2")
root_task = SubResource("BTSelector_i5wuy")
